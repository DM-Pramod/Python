<!DOCTYPE html>
<html>
<head>
    <title>Network Visualization</title>
    <style>
        #network {
            width: 100%;
            height: 800px;
            border: 1px solid lightgray;
        }
        .tooltip-table {
            border-collapse: collapse;
            width: 100%;
        }
        .tooltip-table th, .tooltip-table td {
            border: 1px solid black;
            padding: 5px;
            text-align: left;
        }
        .tooltip-table th {
            background-color: #f2f2f2;
        }
    </style>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="network"></div>
    <script type="text/javascript">
        var nodes = {{ nodes | safe }};
        var edges = {{ edges | safe }};

        var container = document.getElementById('network');
        var data = {
            nodes: new vis.DataSet(nodes),
            edges: new vis.DataSet(edges)
        };
        var options = {
            nodes: {
                shape: 'dot',
                size: 16,
                font: {
                    size: 32,
                    color: '#ffffff'
                },
                borderWidth: 2
            },
            edges: {
                width: 2
            },
            interaction: {
                hover: true
            },
            physics: {
                stabilization: false
            }
        };
        var network = new vis.Network(container, data, options);

        network.on("hoverNode", function (params) {
            var node = nodes.find(n => n.id === params.node);
            var tooltipContent = `
                <table class="tooltip-table">
                    <tr><th>ID</th><td>${node.id}</td></tr>
                    <tr><th>Label</th><td>${node.label}</td></tr>
                    <tr><th>Title</th><td>${node.title}</td></tr>
                </table>`;
            var tooltip = document.createElement('div');
            tooltip.innerHTML = tooltipContent;
            tooltip.style.position = 'absolute';
            tooltip.style.backgroundColor = 'white';
            tooltip.style.border = '1px solid black';
            tooltip.style.padding = '10px';
            tooltip.style.zIndex = '1000';
            tooltip.id = 'tooltip';
            document.body.appendChild(tooltip);

            document.onmousemove = function (e) {
                var x = e.clientX, y = e.clientY;
                tooltip.style.top = (y + 20) + 'px';
                tooltip.style.left = (x + 20) + 'px';
            };
        });

        network.on("blurNode", function (params) {
            var tooltip = document.getElementById('tooltip');
            if (tooltip) {
                tooltip.remove();
            }
            document.onmousemove = null;
        });
    </script>
</body>
</html>
